!function(){"use strict";let t=t=>{let e;return e=t?"string"==typeof t?new URL(t):t:new URL(window.location.href),RegExp("/collections/","i").test(e.pathname)};(r=v||(v={})).CONTINUE="continue",r.DENY="deny",(o=h||(h={})).EXACT="exact",o.ABOVE="above",o.BELOW="below",o.EXACT_OR_ABOVE="exact_or_above",o.EXACT_OR_BELOW="exact_or_below",o.BETWEEN="between",(d=p||(p={})).INVENTORY_STATUS="inventory_status",d.DISCOUNT_PRICE="discount_price",d.PRICE_RANGE="price_range",d.PRODUCT_TAGS="product_tags",d.CREATION_DATE="creation_date",(u=g||(g={})).IN_STOCK="in_stock",u.OUT_OF_STOCK="out_of_stock",(s=S||(S={})).DURATION="duration",s.EXACT_DATE="exact_date",s.BETWEEN_DATES="between_dates",(c=y||(y={})).PERCENT="percent",c.FIXED="fixed";let e="variant";function i(t,e,i){let n=t.getContext("variantSelected"),a={...n,price:e,compare_at_price:i};t.setContext("variantSelected",a)}function n(t,e,n){var a;let l=null==e?void 0:null===(a=e.selling_plan_allocations)||void 0===a?void 0:a.find(t=>{var e;return(null===(e=t.selling_plan_id)||void 0===e?void 0:e.toString())===n});l&&i(t,l.price,l.compare_at_price)}function a(t,e){var n;let a=null==e?void 0:null===(n=e.selling_plan_allocations)||void 0===n?void 0:n[0];a&&i(t,a.price,a.compare_at_price)}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r,o,d,u,s,c,v,h,p,g,S,y,C=()=>class extends GP.Component{connectedCallback(){this.initQuantity(),this.initInventoryQuantity(),this.addSubscribeContext(),this.onEventChangeVariant(),this.onEventChangeQuantity(),this.onEventProductBundleChange(),this.dispatchEvent(new CustomEvent("gp:product-init")),this.setState("isReady",!0);let t=this.querySelector("form");t&&(this.variantSelectedCache=this.getContext("variantSelected"),t.addEventListener("change",t=>{!function(t,e,l){var r,o;let d=e.target,{sellingPlanId:u,radioType:s}=d.dataset;if(!s)return;let c=t.getContext("variantSelected");null===(r=(o={one_time_purchase:()=>i(t,null==l?void 0:l.price,null==l?void 0:l.compare_at_price),selling_plan:()=>u&&n(t,c,u),selling_plan_group:()=>a(t,c)})[s])||void 0===r||r.call(o)}(this,t,this.variantSelectedCache)}))}handleSetProductTitleLink(){this.setProductTitleSelectors(),this.handleProductTitleLinkWrapper(),this.subscribeToVariantChanges()}initQuantity(){this.quantity&&!this.quantity.value&&(this.quantity.value="1")}initInventoryQuantity(){let t=this.getContext("variantSelected"),e=this.getContext("inventoryQuantity"),i=this.getContext("inventory_policy"),n=i===v.CONTINUE||!(null==t?void 0:t.inventoryQuantity)&&e;t&&n&&(t.inventoryQuantity=e,t.inventory_policy=i,this.setContext("variantSelected",t))}addSubscribeContext(){this.subscribeContext((t,e)=>{var i,n,a,l,r,o,d;(null===(i=t.variantSelected)||void 0===i?void 0:i.id)!==(null===(n=e.variantSelected)||void 0===n?void 0:n.id)&&(this.variantSelectedID&&(null===(a=t.variantSelected)||void 0===a?void 0:a.id)&&(this.variantSelectedID.value=t.variantSelected.id.toString()),this.quantity&&(this.quantity.value=null!==(r=null===(l=t.quantity)||void 0===l?void 0:l.toString())&&void 0!==r?r:"1"),this.variantSelectedCache=t.variantSelected,queueMicrotask(()=>{this.applyCurrentVariantSellingPlan()})),t.quantity!=e.quantity&&this.quantity&&(this.quantity.value=null!==(d=null===(o=t.quantity)||void 0===o?void 0:o.toString())&&void 0!==d?d:"1")})}onEventChangeVariant(){window.addEventListener("gp:product-change-variant",t=>{if(t.detail){let a=t.detail.productId,l=t.detail.variantSelected,r=t.detail.productElementUid,o=t.detail.fromIsSyncProduct,d=this.getContext(),u=d.productId,s=d.isSyncProduct,c=this.dataset.uid;if(a==u&&(c&&c===r||"true"==o&&"true"==s)){var e,i,n;this.setContext("variantSelected",l);let t=null==l?void 0:l.options,a={};for(let e of t){let t=this.querySelectorAll(`select[name="${e.name.replace(/['"\\]/g,"\\$&")}"]`);for(let i of Array.from(t))i.value=e.value;a[`${e.name}`]=e.value}let r=this.querySelectorAll("gp-product-variants");for(let t of Array.from(r))t.setState&&(t.setState("currentSelected",a),null===(e=t.setStyleOptionValue)||void 0===e||e.call(t,a,{shopifyProductOptionValues:null==l?void 0:l.shopifyProductOptionValues}),null===(i=t.changeVariantLabel)||void 0===i||i.call(t,a));let o=this.querySelectorAll("#p-variant-group-dropdown");for(let t of Array.from(o))t.value=null==l?void 0:null===(n=l.id)||void 0===n?void 0:n.toString()}}})}onEventChangeQuantity(){window.addEventListener("gp:product-change-quantity",t=>{if(t.detail){let e=t.detail.productId,i=t.detail.quantity,n=this.getContext(),a=n.productId,l=n.isSyncProduct,r=n.quantity;e==a&&r!=i&&"true"==l&&(this.setContext("isQuantityChange",!0),this.setContext("quantity",i))}})}onEventProductBundleChange(){window.addEventListener("gp:product-bundle-change",t=>{let{detail:e}=t;if(!e)return;let{productId:i,productCustomPrice:n,useProductCompareAtPrice:a,hasBundleDiscountActive:l,quantity:r}=e,{productId:o,productCustomPrice:d,isSyncProduct:u}=this.getContext();i===o&&"true"===u&&this.notBundleEqual(n,d)&&(this.setContext("quantity",r),this.setContext("productCustomPrice",n),this.setContext("useProductCompareAtPrice",a),this.setContext("hasBundleDiscountActive",l))})}notBundleEqual(t,e){return JSON.stringify(t)!==JSON.stringify(e)}applyCurrentVariantSellingPlan(){let t=this.querySelector("form");if(!t)return;let e=this.getContext("variantSelected"),i=null==e?void 0:e.id;if(!i)return;let l=t.querySelector(`input[data-radio-type]:checked[name$="_${i}"]`);if(!l)return;let{radioType:r,sellingPlanId:o}=l.dataset;"selling_plan"===r&&o?n(this,e,o):"selling_plan_group"===r&&a(this,e)}constructor(){super(),l(this,"quantity",null),l(this,"variantSelectedID",null),l(this,"variantSelectedCache",void 0),l(this,"productTitleLinkWrapper",void 0),l(this,"setProductTitleSelectors",()=>{var t;this.productTitleLinkWrapper=null===(t=this.getElementsByClassName("gp-product-title-link-wrapper"))||void 0===t?void 0:t[0]}),l(this,"subscribeToVariantChanges",()=>{this.subscribeContext((t,i)=>{var n,a,l;if((null===(n=t.variantSelected)||void 0===n?void 0:n.id)===(null===(a=i.variantSelected)||void 0===a?void 0:a.id)||!this.productTitleLinkWrapper)return;let r=new URL(this.productTitleLinkWrapper.href,window.location.origin);(null===(l=t.variantSelected)||void 0===l?void 0:l.id)?r.searchParams.set(e,t.variantSelected.id.toString()):r.searchParams.delete(e),this.productTitleLinkWrapper.href=r.toString()})}),l(this,"setProductInCollectionLink",()=>{var t;if(!this.productTitleLinkWrapper)return;let{productHandle:e,collectionHandle:i,collectionUrl:n,pageContext:a}=this.getState();if(!i||!n||!e)return;let l=e?`/products/${e}`:"",r=null!=n?n:`/collections/${i}`,o=null===(t=null==a?void 0:a.hasCollectionHandle)||void 0===t||t;this.productTitleLinkWrapper.href=`${o?r:""}${l}`}),l(this,"setProductLink",()=>{if(!this.productTitleLinkWrapper)return;let{productUrl:t,productHandle:e}=this.getState();if(!t||!e)return;let i=e?`/products/${e}`:"#";this.productTitleLinkWrapper.href=null!=t?t:i}),l(this,"handleProductTitleLinkWrapper",()=>{t()?this.setProductInCollectionLink():this.setProductLink()}),this.quantity=this.querySelector('input[name="quantity"]'),this.variantSelectedID=this.querySelector('input[name="id"]'),this.handleSetProductTitleLink()}};let _=()=>{window.removeEventListener("gp-global-loaded",_),customElements.get("gp-product")||customElements.define("gp-product",C())};"completed"===window.gpReadyState?_():window.addEventListener("gp-global-loaded",_)}();
