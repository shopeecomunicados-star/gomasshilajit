!function(t){"use strict";let e=t=>Object.entries(t).reduce((t,[e,i])=>null==i?t:{...t,[e]:i},{}),i=({query:t,container:e})=>{let i=null;try{i=(e||document).querySelector(t||"")}catch(t){console.info("querySelector error",t)}return i},n=["Shrine PRO"],l=()=>{let t=o();if(!r(t))return;let e=a();if(0===e.length)return;let i=Array.from(document.querySelectorAll(".cart-items .cart-item")),n=s(i),l=e.filter(t=>d(t,n,i.length));if(0!==l.length)return l},o=()=>{var t,e,i;return(null===(i=window)||void 0===i?void 0:null===(e=i.Shopify)||void 0===e?void 0:null===(t=e.theme)||void 0===t?void 0:t.schema_name)||""},r=t=>n.includes(t),a=()=>{let t=document.querySelectorAll("cart-drawer-upsell");return Array.from(t).map(t=>({id:t.getAttribute("data-id"),isSelected:"true"===t.getAttribute("data-selected"),quantity:1})).filter(t=>null!==t.id)},s=t=>t.map(t=>{var e;return null===(e=t.querySelector(".quantity__input"))||void 0===e?void 0:e.getAttribute("data-quantity-variant-id")}).filter(t=>null!==t),d=(t,e,i)=>{let n=e.includes(t.id),l=e.some(e=>e!==t.id),o=[i>0&&!n,0===i&&!t.isSelected,n&&l&&t.isSelected,i>0&&n&&!t.isSelected];return!o.some(t=>t)},u=t=>{let e=Object.keys(t),i="";return e.forEach(e=>{t[e]&&(i+=`${e}: ${t[e]};`)}),i},c=t=>`gp-g-${t}`,h=t=>{let{fontFamily:e,isCustom:i,fallbackFontFamily:n,type:l}=t||{};if(!e)return i?n:void 0;if("string"==typeof e)return v({fontFamily:e,fallbackFontFamily:(null==t?void 0:t.fallbackFontFamily)||g(null!=l?l:"heading")});if("object"==typeof e&&"string"==typeof(null==e?void 0:e.value)){if("theme"===e.type){let t=(null==e?void 0:e.value.includes("--g-theme-font"))?`var(${null==e?void 0:e.value})`:null==e?void 0:e.value;return`${t}, var(--g-font-body)`}return v({fontFamily:e.value,fallbackFontFamily:(null==t?void 0:t.fallbackFontFamily)||g(null!=l?l:"heading")})}},v=({fontFamily:t,fallbackFontFamily:e})=>{if(t)return`var(--g-font-${null==t?void 0:t.replace(/ /g,"-")}, '${t}'), ${e}`},p=(t,e)=>t?(null==t?void 0:t.type)&&!f(t.custom)?c(t.type):"":(null==e?void 0:e.type)&&c(null==e?void 0:e.type),g=t=>t.toLocaleLowerCase().includes("heading")?"var(--g-font-heading, heading)":"var(--g-font-body, body)",f=t=>t&&Object.keys(t).length>1||t&&1===Object.keys(t).length&&!t.fontSize;function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class b{createNotify(){let t=p(this.typo),e=this.composeStyle();this.addWrapper(),this.addElement(t,e),this.addCloseBtn(),setTimeout(()=>{this.$element&&(this.$element.remove(),this.$element=null)},this.duration)}addWrapper(){let t=document.getElementById("notification-wrapper");if(t)this.$wrapper=t;else{let t=document.createElement("div");t.id="notification-wrapper",t.className="gps",t.style.cssText=`position: fixed;
        left: 50%;
        top: 16px;
        z-index: 100000;
        display: flex;
        flex-direction: column;
        gap: 8px;
        transform: translateX(-50%);
      `,this.$wrapper=t,document.body.appendChild(t),this.addFontSizeReponsive()}}addFontSizeReponsive(){var t,e,i,n,l;let o=document.createElement("style"),r=null===(t=this.typo)||void 0===t?void 0:t.custom;o.textContent=`
      @media only screen and (max-width: 1024px) and (min-width: 768px) {
        .message-type-${this.type} {
          font-size: ${(null==r?void 0:null===(e=r.fontSize)||void 0===e?void 0:e.tablet)?null==r?void 0:null===(i=r.fontSize)||void 0===i?void 0:i.tablet:void 0} !important;
        }
      }
      @media only screen and (max-width: 767px) {
        .message-type-${this.type} {
          font-size: ${(null==r?void 0:null===(n=r.fontSize)||void 0===n?void 0:n.mobile)?null==r?void 0:null===(l=r.fontSize)||void 0===l?void 0:l.mobile:void 0} !important;
        }
      }
    `,this.$wrapper&&this.$wrapper.appendChild(o)}addElement(t,e){var i,n;let l=`<div class="message-container ${t} message-type-${this.type}"
        style="color: ${this.getColor()}; ${e?u(e):""}";
      >`+((null===(n=this.typo)||void 0===n?void 0:null===(i=n.attrs)||void 0===i?void 0:i.transform)==="capitalize"?this.message.toString().toLocaleLowerCase():this.message)+`</div>
      <div class="close-notification">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6Z"/></svg>
      </div>`,o=document.createElement("div");o.className="toast-notification",o.innerHTML=l;let r=document.getElementsByClassName("toast-notification");3===r.length&&r[0]&&r[0].parentNode&&r[0].parentNode.removeChild(r[0]),o&&(o.style.cssText=`min-width:200px;
        height:auto;
        background-color:white;
        border-radius:10px;
        box-shadow:rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
        text-align:center;
        align-items: center;
        display:flex;
        gap:10px;
        padding:16px 8px;
        justify-content:center;
      `),this.$element=o,this.$wrapper&&this.$wrapper.appendChild(this.$element)}addCloseBtn(){if(this.$element){let t=this.$element.querySelector(".close-notification");t&&(t.style.cssText="width: 16px; height: 16px; cursor: pointer; display: flex; align-items: center;",t.addEventListener("click",()=>{this.$element&&this.$element.remove()}))}}success({message:t,duration:e,typo:i}){this.message=t,this.type="success",this.duration=e,this.typo=i,this.createNotify()}error({message:t,duration:e,typo:i}){this.message=t,this.type="error",this.duration=e,this.typo=i,this.createNotify()}warning({message:t,duration:e,typo:i}){this.message=t,this.type="warning",this.duration=e,this.typo=i,this.createNotify()}getColor(){switch(this.type){case"success":default:return"#52C41A";case"error":return"#EA3335";case"warning":return"#f1c40f"}}constructor(){m(this,"message","notification"),m(this,"type","success"),m(this,"duration",1e3),m(this,"$element",null),m(this,"$wrapper",void 0),m(this,"typo",void 0),m(this,"getSingleColorVariable",t=>{if(t)return t&&"string"==typeof t&&((null==t?void 0:t.startsWith("#"))||(null==t?void 0:t.startsWith("rgb"))||(null==t?void 0:t.startsWith("hsl"))||(null==t?void 0:t.startsWith("transparent")))?t:`var(--g-c-${t}, ${t})`}),m(this,"composeStyle",()=>{if(this.typo){var t,i;let n=this.typo.attrs,l=this.typo.custom;return e({"font-family":h(l),"font-size":(null==l?void 0:null===(t=l.fontSize)||void 0===t?void 0:t.desktop)?null==l?void 0:null===(i=l.fontSize)||void 0===i?void 0:i.desktop:void 0,"font-weight":(null==n?void 0:n.bold)?"bold":(null==l?void 0:l.fontWeight)?null==l?void 0:l.fontWeight:void 0,"letter-spacing":null==l?void 0:l.letterSpacing,"line-height":null==l?void 0:l.lineHeight,"font-style":(null==n?void 0:n.italic)?"italic":void 0,"text-decoration-line":(null==n?void 0:n.underline)?"underline":void 0,"text-transform":null==n?void 0:n.transform,color:this.getSingleColorVariable(null==n?void 0:n.color)})}})}}(z=H||(H={})).Percentage="percentage",z.FixedAmount="fixed_amount",z.NoDiscount="no_discount";let y=t=>{var e;if(!t)return null;let i=t.closest(".product-bundle-item");return{quantity:Number(null==i?void 0:i.getAttribute("quantity")),discountValue:Number(null==i?void 0:i.getAttribute("discountValue")),discountType:null!==(e=null==i?void 0:i.getAttribute("discountType"))&&void 0!==e?e:H.NoDiscount}},S=t=>{var e,i,n;return(null===(i=null===(n=t.closest("gp-product"))||void 0===n?void 0:n.querySelector("gp-product-variants"))||void 0===i?void 0:null===(e=i.getState)||void 0===e?void 0:e.call(i))||""},w=[".appstle_sub_widget",".recharge-subscription-widget"],q="kaching-bundles-block",k=t=>{var e;return(null==t?void 0:t.closest("gp-sticky"))?!!(null===(e=document)||void 0===e?void 0:e.getElementsByTagName(q).length):!!(null==t?void 0:t.getElementsByClassName("gp-kaching-bundles").length)},$=t=>{var e,i,n;let l=null!==(i=null==t?void 0:t.querySelector(q))&&void 0!==i?i:null===(e=document)||void 0===e?void 0:e.querySelector(q);return null!==(n=null==l?void 0:l.selectedVariants())&&void 0!==n?n:null},E=t=>{let e=$(t),i=new FormData;if(!e)return;let n=["id","quantity","product-quantity","product-id"],o=A(t),r=0;e.forEach(({variantId:t,quantity:e,properties:l})=>{i.append(`items[${r}][quantity]`,e.toString()),i.append(`items[${r}][id]`,t.toString());let a={...o,...l};Object.keys(a).forEach(t=>{var e;i.append(`items[${r}][properties][${t}]`,null!==(e=a[t])&&void 0!==e?e:""),n.push(`properties[${t}]`)}),r++});let a=l();return a&&a.forEach(t=>{i.append(`items[${r}][quantity]`,t.quantity.toString()),i.append(`items[${r}][id]`,t.id.toString()),r++}),{data:i,ignoreFields:n}},A=t=>{let e={},i=null==t?void 0:t.querySelectorAll('input[name^="properties["]');return null==i||i.forEach(t=>{var i;if(!t)return;let n=null==t?void 0:null===(i=t.name)||void 0===i?void 0:i.match(/properties\[(.*?)\]/);if(n){let i=n[1];if(!i)return;e[i]=t.value}}),e},T=t=>{let e=null==t?void 0:t.getElementsByClassName("gp-vitals");return!!e&&!((null==e?void 0:e.length)<=0)},C=t=>{var e;let i=null==t?void 0:t.getElementsByClassName("gp-vitals"),n=null==i?void 0:null===(e=i[0])||void 0===e?void 0:e.querySelectorAll("select");if(!n||(null==n?void 0:n.length)<=0)return null;let l={};return null==n||n.forEach(t=>{let e=t.value,i=l[e];i?l[e]=`${parseInt(i)+1}`:l[e]="1"}),l},O=t=>{var e;let i=null==t?void 0:t.querySelector(".gp-vitals #bundle-volume-discounts");if(!i)return;let n=i.querySelectorAll("form ul li");if(n.length){for(let t in n){let i=null===(e=n[t])||void 0===e?void 0:e.querySelector("input");if(null==i?void 0:i.checked)return null==i?void 0:i.value}return 0}},x=t=>{let e=C(t),i=new FormData;if(!e)return;let n=0;for(let[t,l]of Object.entries(e))i.append(`items[${n}][quantity]`,l),i.append(`items[${n}][id]`,t),n++;let o=l();return o&&o.forEach(t=>{i.append(`items[${n}][quantity]`,t.quantity.toString()),i.append(`items[${n}][id]`,t.id.toString()),n++}),{data:i,ignoreFields:["id","quantity","product-quantity","product-id"]}},B=new RegExp(/^(?:[^<>()[\]\\.,;:\s@"]+(?:\.[^<>()[\]\\.,;:\s@"]+)*|".+")@(?:\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]|(?:[a-zA-Z\-\d]+\.)+[a-zA-Z]{2,})$/),D=(t,e)=>{let i=L(t,null==e?void 0:e.type,null==e?void 0:e.min)||!(null==e?void 0:e.required)&&!t,n=I(t,null==e?void 0:e.type,null==e?void 0:e.max),l=null==e||!e.required||W(t),o=R(t,null==e?void 0:e.type);return{isValid:i&&n&&l&&o,isMin:i,isMax:n,isRequired:l,isType:o}};function F(t){return void 0!==t&&/^[+-]?\d+(?:\.\d+)?$/.test(t)}let L=(t,e,i)=>{if(void 0===i||!i)return!0;switch(e){case"string":case"email":return!!t&&t.length>=i;case"number":return F(t)&&Number(t)>=i;default:return!0}},I=(t,e,i)=>{if(!i||!t)return!0;switch(e){case"string":case"email":return t.length<=i;case"number":return F(t)&&Number(t)<=i;default:return!0}},W=t=>!!t,R=(t,e)=>{if(void 0===t)return!0;switch(e){case"string":return"string"==typeof t;case"number":return F(t);case"boolean":return"boolean"==typeof t||"true"===t||"false"===t;case"array":return!!t||Array.isArray(t);case"email":return"string"==typeof t&&B.test(t);default:return!1}};function N(t,e){let i=t.getBoundingClientRect().top+window.pageYOffset,n=window.pageYOffset,l=i-n,o=null;requestAnimationFrame(function t(i){var r;null===o&&(o=i);let a=i-o,s=(r=a/(e/2))<1?l/2*r*r+n:-l/2*(--r*(r-2)-1)+n;window.scrollTo(0,s),a<e&&requestAnimationFrame(t)})}let M=t=>t.substring(1),P=(t,e)=>{if(t){if(e){N(t,e);return}_(t)}},_=t=>{t&&t.scrollIntoView({behavior:"smooth"})},U=(t,e,i,n)=>{try{if(t&&"DIALOG"===t.tagName){var l;null===(l=t.parentNode)||void 0===l||l.openModal()}"scroll-to-top"===e&&V(i),n&&(P(n,i),setTimeout(()=>{window.location.hash=`#${e}`},300))}catch(t){console.info("Handle link clicked error",t)}},V=t=>{let e=document.documentElement;if(t){N(e,t);return}window.scrollTo({top:0,behavior:"smooth"})};function j(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var z,H,G=()=>class extends GP.Component{connectedCallback(){let t=this.closest("gp-product");if((null==t?void 0:t.getState)&&t.getState("isReady")){this.rootInit();return}null==t||t.addEventListener("gp:product-init",()=>{requestAnimationFrame(()=>{this.context=null==t?void 0:t.context,this.rootInit()})})}constructor(t){super(),j(this,"initFunc",void 0),j(this,"rootInit",()=>{let t=this.closest(".gps > section");if(null==t?void 0:t.classList.contains("gps-lazy")){null==t||t.addEventListener("GpLazyLoaded",this.rootInit);return}null==t||t.removeEventListener("GpLazyLoaded",this.rootInit),this.initFunc&&this.initFunc()}),this.initFunc=t}};function Q(t,e){let i;if(!e||0===e.length)return;let n=(i=-1,t.forEach((t,e)=>{let n=/^items\[(\d+)\]\[id\]$/.exec(e);n&&(i=Math.max(i,Number(n[1])))}),i+1);for(let i of e){var l;t.append(`items[${n}][id]`,String(i.id)),t.append(`items[${n}][quantity]`,String(null!==(l=i.quantity)&&void 0!==l?l:1)),i.properties&&Object.entries(i.properties).forEach(([e,i])=>{t.append(`items[${n}][properties][${e}]`,String(i))}),n++}t.get("id")&&t.delete("id"),t.get("quantity")&&t.delete("quantity")}function X(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function Z(t,e,i){if(!e.has(t))throw TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function Y(t,e){var i=Z(t,e,"get");return i.get?i.get.call(t):i.value}function J(t,e,i){X(t,e),e.set(t,i)}function K(t,e,i){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return i}function tt(t,e){X(t,e),e.add(t)}function te(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ti=()=>{var t,e,n,o,r,a,s,d,u,c,h,v,p,g,f,m,q,$,A,C,B,F,L,I;return t=new WeakMap,e=new WeakSet,n=new WeakSet,o=new WeakMap,r=new WeakMap,a=new WeakSet,s=new WeakSet,d=new WeakSet,u=new WeakSet,c=new WeakSet,h=new WeakSet,v=new WeakSet,p=new WeakSet,g=new WeakSet,f=new WeakSet,m=new WeakMap,q=new WeakMap,$=new WeakSet,A=new WeakSet,C=new WeakSet,B=new WeakSet,F=new WeakSet,L=new WeakSet,I=new WeakSet,class extends G(){checkPreselectedVariants(t){let e=Array.from(t).find(t=>{let e=t.parentNode;return"none"!==window.getComputedStyle(e).display});return!e||"true"===e.getAttribute("has-pre-selected")}buildFormData(t,e){let i=this.getFormDataDefault(t,e),n=this.extractFormDataForThirdPartyApp(t),l=this.handleFormData(i,{formDataThirdParty:n},{formEl:t});return l}getFormDataDefault(t,e){var i,n,l,o;let r=new FormData(t);if((null===(i=r)||void 0===i?void 0:i.fd)&&(r=r.fd),!w.some(e=>(null==t?void 0:t.querySelector(`${e}`))!==null)){let e=t.querySelector('input[name="selling_plan"]');e&&r.append("selling_plan",null==e?void 0:e.value)}let a=null===(l=this.closest("gp-product"))||void 0===l?void 0:null===(n=l.getState())||void 0===n?void 0:n.productUrl;try{let t=e.cart;r.append("sections",this.getSectionsToRender(t))}catch(t){console.error(t),r.append("sections","cart-drawer,cart-icon-bubble")}return r.append("section_url",null!==(o=null!=a?a:window.location.pathname)&&void 0!==o?o:"/cart"),r}extractFormDataForThirdPartyApp(t){let e=T(t);if(e){let e=x(t),i=O(t);if(i){if(null==e?void 0:e.data)e.data.append("quantity",i);else{let t=new FormData;return t.append("quantity",i),{data:t,ignoreFields:["quantity"]}}}return e}let i=k(t);if(i){let e=E(t);return e}let n=null==t?void 0:t.querySelector(".skio-plan-picker");if(n){let t=Array.from(n.querySelectorAll("input")).reduce((t,e)=>(e.value&&t.append(e.name,e.value),t),new FormData);return{data:t,ignoreFields:[]}}}handleFormData(t,e,i){var n,o;let r=[],a=new FormData;(null===(n=a)||void 0===n?void 0:n.fd)&&(a=a.fd);let s=e.formDataThirdParty;if(s)s.data.forEach((t,e)=>{a.append(e,t)}),r=s.ignoreFields;else{let t=0,e=l();e&&e.forEach(e=>{a.append(`items[${t}][quantity]`,e.quantity.toString()),a.append(`items[${t}][id]`,e.id.toString()),t++})}let d=null==i?void 0:null===(o=i.formEl)||void 0===o?void 0:o.querySelector(".gp-property_checkbox");return t.forEach((t,e)=>{if(!(r&&r.includes(e))){if(d&&a.has(e)&&"quantity"!==e){a.set(e,`${a.get(e)}, ${t}`);return}a.set(e,t)}}),a}validateFileUpload(t){let e=Array.from((null==t?void 0:t.querySelectorAll("gp-file-upload"))||[]);if(!e)return!0;for(let t of e){let e=null==t?void 0:t.querySelector(".gp-input_picker"),i=null==t?void 0:t.querySelector(".error-message");null==i||i.classList.add("gp-hidden");let n=Number(null==e?void 0:e.getAttribute("data-file-count"))||0,l=(null==e?void 0:e.getAttribute("data-required"))==="true";if(l&&0===n)return i&&(i.textContent="Image upload is required.",i.classList.remove("gp-hidden")),!1}return!0}handleAddUpsellItemsByTheme(t){var e,i,n;let l=(null===(n=window)||void 0===n?void 0:null===(i=n.Shopify)||void 0===i?void 0:null===(e=i.theme)||void 0===e?void 0:e.schema_name)||"";if(!this.SUPPORTED_ADD_UPSELL_ITEM_THEMES.includes(l))return;let o=t.get("id"),r=t.get("quantity");if(!o)return;let a=Array.from(document.querySelectorAll("cart-drawer-upsell")).map(t=>({id:t.getAttribute("data-id"),isSelected:"true"===t.getAttribute("data-selected"),quantity:1})).filter(t=>!!t.id);if(0===a.length)return;let s=Array.from(document.querySelectorAll(".cart-items .cart-item")),d=s.map(t=>{var e;return null===(e=t.querySelector(".quantity__input"))||void 0===e?void 0:e.getAttribute("data-quantity-variant-id")}).filter(t=>!!t),u=a.filter(t=>{let e=d.includes(t.id),i=d.some(e=>e!==t.id);return!(s.length>0&&e&&!t.isSelected||s.length>0&&!e||0===s.length&&!t.isSelected||e&&i&&t.isSelected)});if(0===u.length)return;let c=[...u,{id:o,quantity:r}];c.forEach(({id:e,quantity:i=1},n)=>{t.append(`items[${n}][id]`,e),t.append(`items[${n}][quantity]`,i)}),t.delete("id"),t.delete("quantity")}dispatchEventAfterSubmit(t){if(!this.trigger)return;let e=this.querySelectorAll("button");e.forEach(e=>{let i=e.getAttribute("gp-data-hidden");if("true"===i)return;let n=new CustomEvent("gp:after-submit",{bubbles:!1,cancelable:!0,detail:{data:t}});e.dispatchEvent(n)})}triggerAddCartSuccess(t){K(this,$,tl).call(this,t)}updateContentButtonOutStock(t){var e;let i=null===(e=this.$buttonSoldOut)||void 0===e?void 0:e.querySelector(".gp-content-product-button");i&&(i.innerHTML=t)}constructor(){super(()=>{this.init()}),tt(this,e),tt(this,n),tt(this,a),tt(this,s),tt(this,d),tt(this,u),tt(this,c),tt(this,h),tt(this,v),tt(this,p),tt(this,g),tt(this,f),tt(this,$),tt(this,A),tt(this,C),tt(this,B),tt(this,F),tt(this,L),tt(this,I),te(this,"quantity",void 0),te(this,"inventoryQuantity",void 0),te(this,"variantSelectedID",void 0),te(this,"$button",void 0),te(this,"$buttonSoldOut",void 0),te(this,"$buttonUnavailable",void 0),te(this,"totalVariant",void 0),te(this,"disabled",void 0),te(this,"errorMessage",void 0),te(this,"variantSelectionRequiredMessage",void 0),te(this,"enableThirdPartyCart",void 0),te(this,"successMessage",void 0),te(this,"enableMessage",!1),J(this,t,{writable:!0,value:""}),te(this,"productButtonSetting",void 0),te(this,"productNotificationStyles",void 0),te(this,"pendingBlankTargetWindow",null),te(this,"currentVariantSelected",null),te(this,"bundleItem",void 0),te(this,"linkButtonRedirect",void 0),te(this,"labelUnavailableTranslate",void 0),te(this,"labelOutOfStockTranslate",void 0),te(this,"SUPPORTED_ADD_UPSELL_ITEM_THEMES",["Shrine PRO"]),te(this,"init",()=>{var i,l,o,r,a,s,d,u,c,h,v,p,g,f,b,S;let w=this.closest(".product-bundle-item");this.bundleItem=y(w),this.$button=this.querySelector("button.gp-button-atc"),this.$buttonSoldOut=this.querySelector("button.gp-button-sold-out"),this.$buttonUnavailable=this.querySelector("button.gp-button-unavailable"),this.productButtonSetting=this.getState("setting"),this.productNotificationStyles=this.getState("styles"),this.totalVariant=this.getState("totalVariant"),this.quantity=null===(i=this.getContext("quantity"))||void 0===i?void 0:i.toString(),K(this,e,W).call(this),this.disabled=null===(o=this.getContext("variantSelected"))||void 0===o?void 0:null===(l=o.available)||void 0===l?void 0:l.toString(),this.currentVariantSelected=this.getContext("variantSelected"),this.errorMessage=null!==(c=null===(r=this.productButtonSetting)||void 0===r?void 0:r.errorMessage)&&void 0!==c?c:"Something went wrong",this.variantSelectionRequiredMessage=this.getAttribute("data-variant-selection-required-message")||"Please select a variant to add product to cart",this.enableThirdPartyCart="true"===this.getAttribute("gp-enable-third-partycart"),this.successMessage=null!==(h=null===(a=this.productButtonSetting)||void 0===a?void 0:a.successMessage)&&void 0!==h?h:"Added to cart",this.enableMessage=null!==(v=null===(s=this.productButtonSetting)||void 0===s?void 0:s.enableMessage)&&void 0!==v&&v,S=null!==(p=null===(d=this.productButtonSetting)||void 0===d?void 0:d.errorType)&&void 0!==p?p:"built-in",function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=i}}(this,Z(this,t,"set"),S),K(this,F,ts).call(this),K(this,n,R).call(this),null===(u=this.$button)||void 0===u||u.addEventListener("click",Y(this,m)),this.linkButtonRedirect=null!==(g=this.getAttribute("gp-href"))&&void 0!==g?g:"",this.labelUnavailableTranslate=null!==(f=this.getAttribute("gp-label-unavailable"))&&void 0!==f?f:"Unavailable",this.labelOutOfStockTranslate=null!==(b=this.getAttribute("gp-label-out-of-stock"))&&void 0!==b?b:"Out of stock"}),te(this,"updateDataHiddenInteractionForOutOfStock",t=>{var e,i;null===(e=this.$button)||void 0===e||e.setAttribute("gp-data-hidden","true"),null===(i=this.$buttonUnavailable)||void 0===i||i.setAttribute("gp-data-hidden","true"),null==t||t.setAttribute("gp-data-hidden","false")}),te(this,"updateDataHiddenInteractionForUnavailable",t=>{var e,i;null===(e=this.$button)||void 0===e||e.setAttribute("gp-data-hidden","true"),null===(i=this.$buttonSoldOut)||void 0===i||i.setAttribute("gp-data-hidden","true"),null==t||t.setAttribute("gp-data-hidden","false")}),te(this,"updateDataHiddenInteractionForATC",()=>{var t,e,i;null===(t=this.$button)||void 0===t||t.setAttribute("gp-data-hidden","false"),null===(e=this.$buttonSoldOut)||void 0===e||e.setAttribute("gp-data-hidden","true"),null===(i=this.$buttonUnavailable)||void 0===i||i.setAttribute("gp-data-hidden","true")}),te(this,"showButtonDisable",t=>{var e,i,n,l;null===(e=this.$button)||void 0===e||e.setAttribute("disabled","disabled"),null===(n=this.$button)||void 0===n||null===(i=n.parentElement)||void 0===i||i.classList.add("!gp-hidden"),null==t||null===(l=t.parentElement)||void 0===l||l.classList.remove("!gp-hidden")}),te(this,"hiddenButtonDisable",t=>{var e,i,n,l;null===(e=this.$button)||void 0===e||e.removeAttribute("disabled"),null===(n=this.$button)||void 0===n||null===(i=n.parentElement)||void 0===i||i.classList.remove("!gp-hidden"),null==t||null===(l=t.parentElement)||void 0===l||l.classList.add("!gp-hidden"),this.updateDataHiddenInteractionForATC()}),te(this,"setErrorStyle",t=>{t.style.border="1px solid red"}),te(this,"fieldsetValidate",()=>{let t=!0,e=this.closest("form"),i=null==e?void 0:e.querySelectorAll('[data-required="true"]');return null==i||i.forEach(e=>{let i=e.querySelectorAll("input[name]");i.forEach(i=>{""===i.value&&(t=!1,this.setErrorStyle(e))})}),t}),te(this,"getInputInvalid",()=>{let t=this.closest("form"),e=null==t?void 0:t.querySelectorAll("input:invalid");return e}),te(this,"setErrorForInputs",()=>{let t=this.getInputInvalid();null==t||t.forEach(t=>{this.setErrorStyle(t)})}),te(this,"formValidate",()=>{let t=this.closest("form"),e=this.fieldsetValidate();return(null==t?void 0:t.reportValidity())&&e}),te(this,"getSectionsToRender",t=>t&&"function"==typeof t.getSectionsToRender?t.getSectionsToRender().map(t=>t.id).join(","):"cart-drawer,cart-icon-bubble"),J(this,o,{writable:!0,value:()=>{setTimeout(function(){try{"function"==typeof SLIDECART_UPDATE&&SLIDECART_UPDATE(),"function"==typeof SLIDECART_OPEN&&SLIDECART_OPEN()}catch(t){console.log(t)}},1e3)}}),J(this,r,{writable:!0,value:t=>{this.bundleItem&&t.set("quantity",this.bundleItem.quantity.toString()||"1")}}),te(this,"handleOpenCartDrawer",async(t,e)=>{var i,n,l,o,r;let a=new CustomEvent("gp:open-cart-drawer",{bubbles:!0,cancelable:!0,detail:{data:t},composed:!0});document.dispatchEvent(a);let s=null===(n=window)||void 0===n?void 0:null===(i=n.GPF)||void 0===i?void 0:i.openCartDrawer;if("function"==typeof s){try{s(t)}catch(t){console.error(t.message),window.location.href=null!==(l=this.linkButtonRedirect)&&void 0!==l?l:"/cart"}return}let d=e&&"function"==typeof e.renderContents;if(!d){window.location.href=null!==(o=this.linkButtonRedirect)&&void 0!==o?o:"/cart";return}if(e.classList.remove("is-empty"),t.sections){try{e.renderContents(t)}catch(t){console.error(t.message),window.location.href=null!==(r=this.linkButtonRedirect)&&void 0!==r?r:"/cart"}return}await this.fetchCartSectionsAndRender(t,e)}),te(this,"fetchCartSectionsAndRender",async(t,e)=>{let i=this.getSectionsToRender(e).split(",");if(0===i.length){var n;window.location.href=null!==(n=this.linkButtonRedirect)&&void 0!==n?n:"/cart";return}let l=i.map(t=>fetch(`?sections=${t}`));Promise.all(l).then(t=>{let e=t.every(t=>t.ok);if(!e)throw Error("Failed to fetch one or more cart section responses");return Promise.all(t.map(t=>t.json()))}).then(i=>{let n=i.reduce((t,e)=>{let i=Object.keys(e).reduce((t,i)=>({...t,[i]:e[i]}),{});return{...t,...i}}),l={...t,sections:n};e.renderContents(l)}).catch(t=>{var e;console.error("Failed to fetch cart sections",t),window.location.href=null!==(e=this.linkButtonRedirect)&&void 0!==e?e:"/cart"})}),J(this,m,{writable:!0,value:t=>{t.preventDefault(),t.stopPropagation();let e=this.getContext("blankOptionVariant");if(!this.currentVariantSelected&&this.totalVariant&&this.totalVariant>1||e){K(this,I,tu).call(this,this.variantSelectionRequiredMessage,!0);return}this.setContext("isSubmit",!0);let i=this.getContext("properties"),n=null==i?void 0:i.some(t=>{let e=D(t.value,t.validation);return!e.isValid});n||(K(this,v,H).call(this),K(this,a,N).call(this),Y(this,q).call(this))}}),J(this,q,{writable:!0,value:()=>{window.dispatchEvent(new CustomEvent("gp:add-to-cart",{bubbles:!0,cancelable:!0,detail:null,composed:!0}))}})}};function W(){var t;let e=new URL(window.location.href),i=e.searchParams.get("variant"),n=null===(t=this.closest("gp-product"))||void 0===t?void 0:t.querySelectorAll("gp-product-variants");if(!n||0===n.length)return;let l=this.checkPreselectedVariants(n);i||l||this.setContext("variantSelected",void 0)}function R(){var t,e;let i=isNaN(parseInt(null!==(t=this.inventoryQuantity)&&void 0!==t?t:"0"))?parseInt(null!==(e=this.inventoryQuantity)&&void 0!==e?e:"0"):0;if(void 0===this.disabled)return;"true"===this.disabled||i>0?this.hiddenButtonDisable(this.$buttonSoldOut):this.showButtonDisable(this.$buttonSoldOut);let n=this.getContext("currentSelectedOption"),l=this.getContext("variantSelected"),o=n&&Object.values(n).some(t=>"blank"===t);o&&((null==l?void 0:l.available)||!l)&&this.hiddenButtonDisable(this.$buttonSoldOut)}function N(){var t,e;let i=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),n=this.closest("form"),l=this.formValidate(),a=this.validateFileUpload(n);if(!l){null==n||n.reportValidity(),this.setErrorForInputs();return}if(!a)return;if(!n){K(this,I,tu).call(this,"Product form not found");return}K(this,A,to).call(this);let s=this.buildFormData(n,{cart:i});!function(t,e){let i=new CustomEvent("gp:before-add-to-cart",{bubbles:!0,cancelable:!1,detail:{form:t,formData:e,api:{addField:(t,i)=>{e.has(t)&&e.delete(t),e.append(t,i)},removeKey:t=>{e.has(t)&&e.delete(t)},addItem:t=>{Q(e,[t])},addItems:t=>{Q(e,t)}}}});document.dispatchEvent(i)}(n,s),this.handleAddUpsellItemsByTheme(s);let d=JSON.parse(null!==(e=this.getAttribute("gp-interaction-after-submit"))&&void 0!==e?e:"{}"),u=null===(t=window)||void 0===t?void 0:t.GP_CUSTOM_CART_URL,h=u||"/cart/add.js";Y(this,r).call(this,s),fetch(h,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/javascript"},body:s}).then(async t=>{if(t)return t.ok?t.json():t.json().then(t=>{throw t})}).then(t=>{var e;let n=null===(e=this.productButtonSetting)||void 0===e?void 0:e.actionEffect;"continue-shopping"===n&&(K(this,L,td).call(this),Y(this,o).call(this)),K(this,B,ta).call(this),K(this,C,tr).call(this),K(this,p,X).call(this,n,t,i),K(this,$,tl).call(this,t),Object.keys(d).length>0&&Object.entries(d).map(([t])=>{this.dispatchEventAfterSubmit(Number(t))})}).catch(t=>{K(this,C,tr).call(this),K(this,I,tu).call(this,null==t?void 0:t.description),K(this,c,j).call(this)})}function P(){window.location.href="/checkout"}function _(){var t,e,n,l,o;let r=null===(e=this.productButtonSetting)||void 0===e?void 0:null===(t=e.customURL)||void 0===t?void 0:t.target,a=null===(l=this.productButtonSetting)||void 0===l?void 0:null===(n=l.customURL)||void 0===n?void 0:n.link,s=null!==(o=this.linkButtonRedirect)&&void 0!==o?o:a;if(s){if(s.startsWith("#")&&"#"!==s){let t=M(s),e=i({query:`[data-gp-dialog-id='${t}']`}),n=i({query:`[id='${t}']`}),l=this.querySelector("gp-button");if(!l)return;let o=Number(l.getAttribute("data-scroll-speed"));U(e,t,o,n);return}"_blank"===r?K(this,h,z).call(this,s):window.location.href=null!=s?s:""}}function V(){let t=navigator.userAgent;return/safari/i.test(t)&&!/chrome|android/i.test(t)}function j(){var t;null===(t=this.pendingBlankTargetWindow)||void 0===t||t.close(),this.pendingBlankTargetWindow=null}function z(t){K(this,u,V).call(this)?(this.pendingBlankTargetWindow&&!this.pendingBlankTargetWindow.closed?this.pendingBlankTargetWindow.location.href=t:(K(this,c,j).call(this),window.open(t,"_blank")),this.pendingBlankTargetWindow=null):window.open(t,"_blank")}function H(){var t,e,i;if(!K(this,u,V).call(this))return;let n=null===(t=this.productButtonSetting)||void 0===t?void 0:t.actionEffect,l=null===(i=this.productButtonSetting)||void 0===i?void 0:null===(e=i.customURL)||void 0===e?void 0:e.target;if("go-to-url"===n&&"_blank"===l)try{this.pendingBlankTargetWindow=window.open("","_blank")}catch(t){this.pendingBlankTargetWindow=null}}function X(t,e,i){if(!this.enableThirdPartyCart)switch(t){case"continue-shopping":K(this,g,ti).call(this,i,e);break;case"go-to-url":K(this,g,ti).call(this,i,e),K(this,d,_).call(this);break;case"buy-now":K(this,s,P).call(this);break;case"open-cart-drawer":this.handleOpenCartDrawer(e,i);break;default:K(this,f,tn).call(this)}}function ti(t,e){if(e&&e.sections&&e.sections.length){let i=(t,e=".shopify-section")=>new DOMParser().parseFromString(t,"text/html").querySelector(e).innerHTML,n=()=>{let t=document.getElementById("cart-icon-bubble");t&&e.sections["cart-icon-bubble"]&&(t.innerHTML=i(e.sections["cart-icon-bubble"]))},l=document.querySelector("cart-drawer");if(null!==l)try{null!==t&&"function"==typeof t.getSectionsToRender&&(t.getSectionsToRender().forEach(t=>{if(e.sections[t.id]){let n=t.selector?document.querySelector(t.selector):document.getElementById(t.id);n.innerHTML=i(e.sections[t.id],t.selector)}}),t.classList.contains("is-empty")&&t.classList.remove("is-empty"))}catch(t){console.error(t),n()}else n()}}function tn(){let t=this.getContext("formId"),e=document.querySelector(`#${t}`);null==e||e.submit()}function tl(t){let e=this.closest("form"),i=new CustomEvent("gp:add-to-cart-success",{detail:{data:t,payload:{formId:null==e?void 0:e.getAttribute("id")}}});window.dispatchEvent(i)}function to(){var t;null===(t=this.$button)||void 0===t||t.setAttribute("data-state","loading")}function tr(){var t;null===(t=this.$button)||void 0===t||t.setAttribute("data-state","idle")}function ta(){var t,e;let i=isNaN(parseInt(null!==(t=this.quantity)&&void 0!==t?t:"0"))?parseInt(null!==(e=this.quantity)&&void 0!==e?e:"0"):0;this.quantity&&(this.quantity=(i>=1?i-1:0).toString())}function ts(){this.subscribeContext((t,e)=>{var i,n,l,o,r,a,s,d;this.currentVariantSelected=t.variantSelected;let u=S(this);if((null===(i=t.variantSelected)||void 0===i?void 0:i.id)!==(null===(n=e.variantSelected)||void 0===n?void 0:n.id)){if(this.$button){if(null===(r=t.variantSelected)||void 0===r?void 0:r.available)this.hiddenButtonDisable(this.$buttonSoldOut);else{if(this.showButtonDisable(this.$buttonSoldOut),!t.variantSelected&&"string"!=typeof(null==u?void 0:u.currentSelected)&&(null==u?void 0:u.currentSelected)){this.updateContentButtonOutStock(this.labelUnavailableTranslate||""),this.updateDataHiddenInteractionForUnavailable(this.$buttonUnavailable);return}this.updateContentButtonOutStock(this.labelOutOfStockTranslate||""),this.updateDataHiddenInteractionForOutOfStock(this.$buttonSoldOut)}}this.variantSelectedID&&(null===(l=t.variantSelected)||void 0===l?void 0:l.id)&&(this.variantSelectedID=t.variantSelected.id.toString()),this.quantity&&(this.quantity=null!==(a=null===(o=t.quantity)||void 0===o?void 0:o.toString())&&void 0!==a?a:"1")}t.quantity!=e.quantity&&this.quantity&&(this.quantity=null!==(d=null===(s=t.quantity)||void 0===s?void 0:s.toString())&&void 0!==d?d:"1");let c=t.currentSelectedOption&&Object.values(t.currentSelectedOption).some(t=>"blank"===t);c&&this.hiddenButtonDisable(this.$buttonSoldOut),t.variantSelected&&!t.variantSelected.available?(this.updateContentButtonOutStock(this.labelOutOfStockTranslate||""),this.showButtonDisable(this.$buttonSoldOut)):!t.variantSelected&&"string"!=typeof(null==u?void 0:u.currentSelected)&&(null==u?void 0:u.currentSelected)&&(this.showButtonDisable(this.$buttonSoldOut),this.updateContentButtonOutStock(this.labelUnavailableTranslate||""))})}function td(){var t;this.enableMessage&&new b().success({message:this.successMessage,duration:5e3,typo:null===(t=this.productNotificationStyles)||void 0===t?void 0:t.successTypo})}function tu(e,i){var n;K(this,C,tr).call(this),this.enableMessage&&new b().error({message:"built-in"===Y(this,t)||i?e:this.errorMessage,duration:5e3,typo:null===(n=this.productNotificationStyles)||void 0===n?void 0:n.errorTypo})}};let tn=()=>{window.removeEventListener("gp-global-loaded",tn),customElements.get("gp-product-button")||customElements.define("gp-product-button",ti())};"completed"===window.gpReadyState?tn():window.addEventListener("gp-global-loaded",tn),t.defineComponentProductButton=tn}({});
